{% extends "base.html" %}
{% load static %}
{% block content %}
<!-- What's New Promo -->
<div style="background: url('https://res.cloudinary.com/dyrqrlk7s/image/upload/v1740721892/kid_xl_hhxjzu.jpg') no-repeat center center; 
            background-size: cover; 
            width: 100%; 
            min-height: 50vh;">
    <div class="container" style="padding-top: 150px;">
        <div class="row justify-content-end">
            <div class="col-12 col-md-6 text-center text-center-on-mobile p-1">
                <h2 class="my-4">See What's New!</h2>
            </div>
        </div>
        <div class="row justify-content-end">
            <div class="col col-md-4 p-3 d-flex align-items-center flex-column">
                <div class='p-3 rounded-4' style='background-color: rgba(144, 219, 244, 0.5);'>
                    <div class="flex-shrink-0 mb-3 mb-md-0 text-center">
                        <a href="{% url 'products:product_detail' product_id=promo_new.id %}">
                            <img src="{{ promo_new.image.url }}" alt="{{ promo_new.name }}" class="rounded-4"
                                style="max-height:200px; max-width: 100%;">
                        </a>
                    </div>
                    <div class="text-center">
                        <a href="{% url 'products:product_detail' product_id=promo_new.id %}"
                            class="text-decoration-none no-link-style">
                            <h3>{{ promo_new.name }}</h3>
                        </a>
                        <p>{{ promo_new.flavor }}</p>
                        <p>{{ promo_new.description }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- What's Popular Promo -->
<div style="background: url('https://res.cloudinary.com/dyrqrlk7s/image/upload/v1740721891/candy_girl_xl_yjvymu.jpg') no-repeat center center; 
            background-size: cover; 
            width: 100%; 
            min-height: 50vh;">
    <div class="container" style="padding-top: 50px; padding-left: 0; margin-left:0;">
        <div class="row">
            <div class="col-12 col-md-12 text-center p-1 text-center-on-mobile">
                <h2 class="my-4">See What's Popular!</h2>
            </div>
        </div>
        <div class="row justify-content-start mobile-stack">
            <div class="col col-md-4 p-3 d-flex align-items-center flex-column">
                <div class='p-3 rounded-4' style=' background-color: rgba(255, 207, 210, 0.5);'>
                    <div class="flex-shrink-0 me-3 mb-3 mb-md-0">
                        <a href="{% url 'products:product_detail' product_id=promo_popular_1.id %}">
                            <img src="{{ promo_popular_1.image.url }}" alt="{{ promo_popular_1.name }}"
                                class="rounded-4" style="max-height:200px; max-width: 100%;">
                        </a>
                    </div>
                    <a href="{% url 'products:product_detail' product_id=promo_popular_1.id %}"
                        class="text-decoration-none no-link-style">
                        <h3>{{ promo_popular_1.name }}</h3>
                    </a>
                    <p>{{ promo_popular_1.flavor }}</p>
                </div>
            </div>

            <div class="col col-md-4 p-3 d-flex align-items-center flex-column">
                <div class='p-3 rounded-4' style=' background-color: rgba(255, 207, 210, 0.5);'>
                    <div class="flex-shrink-0 me-3 mb-3 mb-md-0">
                        <a href="{% url 'products:product_detail' product_id=promo_popular_2.id %}">
                            <img src="{{ promo_popular_2.image.url }}" alt="{{ promo_popular_2.name }}"
                                class="rounded-4" style="max-height:200px; max-width: 100%;">
                        </a>
                    </div>
                    <a href="{% url 'products:product_detail' product_id=promo_popular_2.id %}"
                        class="text-decoration-none no-link-style">
                        <h3>{{ promo_popular_2.name }}</h3>
                    </a>
                    <p>{{ promo_popular_2.flavor }}</p>
                </div>
            </div>

            <div class="col col-md-4 p-3 d-flex align-items-center flex-column">
                <div class='p-3 rounded-4' style=' background-color: rgba(255, 207, 210, 0.5);'>
                    <div class="flex-shrink-0 me-3 mb-3 mb-md-0">
                        <a href="{% url 'products:product_detail' product_id=promo_popular_3.id %}">
                            <img src="{{ promo_popular_3.image.url }}" alt="{{ promo_popular_3.name }}"
                                class="rounded-4" style="max-height:200px; max-width: 100%;">
                        </a>
                    </div>
                    <a href="{% url 'products:product_detail' product_id=promo_popular_3.id %}"
                        class="text-decoration-none no-link-style">
                        <h3>{{ promo_popular_3.name }}</h3>
                    </a>
                    <p>{{ promo_popular_3.flavor }}</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- user reviews display -->
<div class="container mt-5">
    <h2 class="mb-4 text-center-on-mobile">User Reviews</h2>
    {% for review in reviews|slice:":5" %}
    <div class="review-list mb-4">
        <div class="container text-center">
            <div class="row">
                <div class="col-2 col-md-2">
                    <strong>{{ review.product.name }}</strong>
                    <img src="{{ review.product.image.url }}" alt="{{ review.product.name }}" class="rounded-4"
                        style="max-height:100px; max-width: 100px;">
                </div>
                <div class="col-10 col-md-10 text-start text-center-on-mobile">
                    <p><strong>{{ review.user.username }}</strong> ({{ review.rating }} &#9733;)</p>
                    <p>"{{ review.comments }}"</p>
                </div>
            </div>
        </div>
    </div>
    {% empty %}
    <p>No reviews available.</p>
    {% endfor %}
</div>
{% endblock %}